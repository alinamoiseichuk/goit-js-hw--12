{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(query, currentPage) {\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst params = new URLSearchParams({\n    key: \"43019776-35548046cc937008d4e9556be\",\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n});\n\n    try {\n        const res = await axios.get(BASE_URL, { params });\n        return res.data;\n    } catch (error) {\n        console.error(error);\n    };\n};\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const gallery = document.querySelector(\".gallery\");\n\nexport function templateImg(data) {\n    const markup = data.map((photo) => {\n        return `<li class=\"photos-list-item\">\n        <a class=\"photos-list-link\" href=\"${photo.largeImageURL}\">\n        <img\n        loading=\"lazy\"\n        class=\"photo\"\n        src=\"${photo.webformatURL}\" \n        alt=\"${photo.tags}\"/>\n        </a>\n        <ul class=\"photo-information-container\">\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${photo.likes}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${photo.views}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${photo.comments}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${photo.downloads}</p></li>\n        </ul>\n        </li>`;\n    })\n        .join(\"\");\n        gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n};\n\n const lightbox = new SimpleLightbox('.photos-list-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n });\n","import { getImages } from \"./js/pixabay-api\";\nimport { templateImg } from \"./js/render-functions\";\nimport { gallery } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\")\nconst btnLoadMore = document.querySelector(\".btn-load\");\n\nlet value;\nlet currentPage;\nlet maxPage = 0;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", handleSubmit);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    showLoader();   \n    value = form.elements.searchQuery.value.trim().toLowerCase();  \n\n    currentPage = 1;\n\n    try {\n        const data = await getImages(value, currentPage)\n        maxPage = Math.ceil(data.totalHits / perPage);\n        if (data.hits.length === 0 || value === \"\") {\n            gallery.innerHTML = \"\";\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                theme: 'dark',\n                progressBarColor: '#FFFFFF',\n                color: '#EF4040',\n                position: 'topRight',\n                width: '432px',\n                height: '88px',\n            });\n            hideLoadMore();\n        } else {\n            gallery.innerHTML = \"\";\n            templateImg(data.hits);\n            checkBtnStatus();\n        }\n        form.reset();  \n    } catch(error) {\n        console.error(error);;\n    }; \n    hideLoader();\n};\n\nbtnLoadMore.addEventListener(\"click\", onLoadMoreClick);\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    showLoader();\ntry {\n    const data = await getImages(value, currentPage);\n    templateImg(data.hits);\n\n    myScroll();\n    checkBtnStatus();\n\n} catch (error) {\n    console.error(error);\n    };\n    hideLoader();\n};\n\nfunction myScroll() {\n    const height = gallery.firstChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\",\n    });\n};\n\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n};\n\nfunction hideLoader() {\n    loader.classList.add(\"hidden\");\n};\n\nfunction showLoadMore() {\n        btnLoadMore.classList.remove(\"hidden\");\n};\n\nfunction hideLoadMore() {\n        btnLoadMore.classList.add(\"hidden\");\n};\n\nfunction checkBtnStatus() {\n    if (currentPage >= maxPage) {\n        hideLoadMore();\n         iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        color: \"blue\",\n        position: \"topRight\",\n        theme: \"light\",\n        progressBarColor: '#FFFFFF',\n    });\n    } else {\n        showLoadMore();\n    };\n};\n\n\n"],"names":["getImages","query","currentPage","BASE_URL","params","axios","error","gallery","templateImg","data","markup","photo","lightbox","SimpleLightbox","form","loader","btnLoadMore","value","maxPage","perPage","handleSubmit","event","showLoader","iziToast","hideLoadMore","checkBtnStatus","hideLoader","onLoadMoreClick","myScroll","height","showLoadMore"],"mappings":"+vBAEO,eAAeA,EAAUC,EAAOC,EAAa,CACpD,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,CAAC,EAEG,GAAI,CAEA,OADY,MAAMG,EAAM,IAAIF,EAAU,CAAE,OAAAC,CAAM,CAAE,GACrC,IACd,OAAQE,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAE3B,CAAA,CCdO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAYC,EAAM,CAC9B,MAAMC,EAASD,EAAK,IAAKE,GACd;AAAA,4CAC6BA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA,eAIhDA,EAAM,YAAY;AAAA,eAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,gGAGuEA,EAAM,KAAK;AAAA,gGACXA,EAAM,KAAK;AAAA,mGACRA,EAAM,QAAQ;AAAA,oGACbA,EAAM,SAAS;AAAA;AAAA,cAG9G,EACI,KAAK,EAAE,EACRJ,EAAQ,mBAAmB,YAAaG,CAAM,EAClDE,EAAS,QAAO,CACpB,CAEC,MAAMA,EAAW,IAAIC,EAAe,oBAAqB,CAClD,aAAc,MACd,aAAc,GACtB,CAAE,EC3BIC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,WAAW,EAEtD,IAAIC,EACAf,EACAgB,EAAU,EACd,MAAMC,EAAU,GAEhBL,EAAK,iBAAiB,SAAUM,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EACpBC,IACAL,EAAQH,EAAK,SAAS,YAAY,MAAM,KAAI,EAAG,cAE/CZ,EAAc,EAEd,GAAI,CACA,MAAMO,EAAO,MAAMT,EAAUiB,EAAOf,CAAW,EAC/CgB,EAAU,KAAK,KAAKT,EAAK,UAAYU,CAAO,EACxCV,EAAK,KAAK,SAAW,GAAKQ,IAAU,IACpCV,EAAQ,UAAY,GACpBgB,EAAS,MAAM,CACX,QAAS,2EACT,MAAO,OACP,iBAAkB,UAClB,MAAO,UACP,SAAU,WACV,MAAO,QACP,OAAQ,MACxB,CAAa,EACDC,MAEAjB,EAAQ,UAAY,GACpBC,EAAYC,EAAK,IAAI,EACrBgB,KAEJX,EAAK,MAAK,CACb,OAAOR,EAAO,CACX,QAAQ,MAAMA,CAAK,CAE3B,CAAIoB,EAAU,CACd,CAEAV,EAAY,iBAAiB,QAASW,CAAe,EAErD,eAAeA,GAAkB,CAC7BzB,GAAe,EACfoB,IACJ,GAAI,CACA,MAAMb,EAAO,MAAMT,EAAUiB,EAAOf,CAAW,EAC/CM,EAAYC,EAAK,IAAI,EAErBmB,IACAH,GAEJ,OAASnB,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAEvB,CAAIoB,EAAU,CACd,CAEA,SAASE,GAAW,CAChB,MAAMC,EAAStB,EAAQ,WAAW,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACZ,IAAKsB,EAAS,EACd,SAAU,QAClB,CAAK,CACL,CAEA,SAASP,GAAa,CAClBP,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASW,GAAa,CAClBX,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASe,GAAe,CAChBd,EAAY,UAAU,OAAO,QAAQ,CAC7C,CAEA,SAASQ,GAAe,CAChBR,EAAY,UAAU,IAAI,QAAQ,CAC1C,CAEA,SAASS,GAAiB,CAClBvB,GAAegB,GACfM,IACCD,EAAS,KAAK,CACf,QAAS,4DACT,MAAO,OACP,SAAU,WACV,MAAO,QACP,iBAAkB,SAC1B,CAAK,GAEGO,GAER"}